(this["webpackJsonpactors-crossover-react-2"]=this["webpackJsonpactors-crossover-react-2"]||[]).push([[0],{129:function(e,t,r){},135:function(e,t,r){},149:function(e,t,r){},150:function(e,t,r){"use strict";r.r(t);var c,n,a,o=r(0),s=r.n(o),i=r(35),l=r.n(i),d=(r(129),r(122)),u=r(59),j=r(155),b=r(157),h=r(158),v=r(156),O=r(159),f=r(37),g=r(68),x=r(154),p=r(153),m=r(46),S=r(88),y={};!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(a||(a={}));var w=Object(f.gql)(c||(c=Object(S.a)(["\n    query ActorSearch($queryString: String!) {\n  actorSearch(queryString: $queryString, page: 1) {\n    results {\n      id\n      name\n    }\n    meta {\n      totalResults\n      totalPages\n    }\n  }\n}\n    "])));var I=Object(f.gql)(n||(n=Object(S.a)(["\n    query CrossoverMovies($actorIds: [Int!]!) {\n  crossoverMovies(actorIds: $actorIds) {\n    id\n    title\n    crossoverCredits {\n      actorId\n      characterName\n    }\n  }\n}\n    "])));r(135);var C=r(9),P=function(e){var t=e.onActorSelect,r=Object(o.useState)(""),c=Object(u.a)(r,2),n=c[0],a=c[1],s=Object(o.useState)([]),i=Object(u.a)(s,2),l=i[0],d=i[1],j=function(e){var t=Object(m.a)(Object(m.a)({},y),e);return f.useQuery(w,t)}({variables:{queryString:n},skip:n.length<=2}),b=j.loading,h=j.data;return Object(o.useEffect)((function(){(null===h||void 0===h?void 0:h.actorSearch.results)&&d(h.actorSearch.results.map((function(e){return{key:e.id,value:e.id,label:e.name}})))}),[h]),Object(C.jsx)(x.a,{searchValue:n,onSearch:function(e){return a(e)},onSelect:function(e){var r=null===h||void 0===h?void 0:h.actorSearch.results.find((function(t){return t.id===e}));r&&t(r)},options:l,loading:b,showSearch:!0,filterOption:!1,optionLabelProp:"label",notFoundContent:b?Object(C.jsx)(p.a,{size:"small"}):null,placeholder:"Search for actors",style:{width:"100%"}})},q=function(e){var t=e.movies;function r(e){var t=e.crossoverCredits.map((function(e){return"Actor ID: ".concat(e.actorId,", Character Name: ").concat(e.characterName)}));return"Title: ".concat(e.title,", credits: ").concat(t)}return Object(C.jsx)("ul",{children:t.map((function(e){return Object(C.jsx)("li",{children:r(e)},e.id)}))})},A=(r(149),new f.ApolloClient({uri:"https://actors-crossover-gql.herokuapp.com/graphql",cache:new f.InMemoryCache})),M=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),r=t[0],c=t[1],n=function(e){var t=Object(m.a)(Object(m.a)({},y),e);return f.useLazyQuery(I,t)}({client:A}),a=Object(u.a)(n,2),s=a[0],i=a[1],l=i.loading,x=i.error,p=i.data;return Object(C.jsx)(g.ApolloProvider,{client:A,children:Object(C.jsxs)(j.a,{children:[Object(C.jsx)(j.a.Header,{children:Object(C.jsx)("h1",{style:{margin:0,color:"white"},children:"Actors-Crossover"})}),Object(C.jsx)(j.a.Content,{style:{padding:"40px 50px"},children:Object(C.jsxs)(b.a,{gutter:16,children:[Object(C.jsx)(h.a,{xs:24,md:12,children:Object(C.jsxs)("div",{className:"search",children:[Object(C.jsx)("h3",{children:"Select one or more actors"}),Object(C.jsx)(P,{onActorSelect:function(e){c([].concat(Object(d.a)(r),[e]))}}),Object(C.jsx)("ul",{children:r.map((function(e){return Object(C.jsxs)("li",{children:[e.name," (ID: ",e.id,")"]},e.id)}))})]})}),Object(C.jsx)(h.a,{xs:24,md:12,children:Object(C.jsxs)("div",{className:"results",children:[Object(C.jsx)(v.a,{type:"primary",disabled:r.length<=1,loading:l,onClick:function(){return s({variables:{actorIds:r.map((function(e){return e.id}))}})},children:"Find Movies"}),l&&Object(C.jsx)("p",{children:"loading..."}),x&&Object(C.jsxs)("p",{children:["error: ",x]}),(null===p||void 0===p?void 0:p.crossoverMovies)&&Object(C.jsx)(q,{movies:p.crossoverMovies})]})})]})}),Object(C.jsx)(j.a.Footer,{style:{textAlign:"center"},children:Object(C.jsxs)(O.b,{direction:"vertical",children:[Object(C.jsx)("h4",{children:"Powered by The Movie Database API"}),Object(C.jsx)("a",{href:"https://www.themoviedb.org",target:"_blank",rel:"noreferrer",children:Object(C.jsx)("img",{alt:"Powered by The Movie DB",src:"https://www.themoviedb.org/assets/2/v4/logos/v2/blue_square_1-5bdc75aaebeb75dc7ae79426ddd9be3b2be1e342510f8202baf6bffa71d7f5c4.svg",style:{width:"240px",height:"auto"}})})]})})]})})},k=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,160)).then((function(t){var r=t.getCLS,c=t.getFID,n=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),c(e),n(e),a(e),o(e)}))};l.a.render(Object(C.jsx)(s.a.StrictMode,{children:Object(C.jsx)(M,{})}),document.getElementById("root")),k()}},[[150,1,2]]]);
//# sourceMappingURL=main.69f7ebd4.chunk.js.map